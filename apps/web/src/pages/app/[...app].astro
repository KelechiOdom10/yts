---
import { App } from "~/app/main";
import Layout from "~/layouts/Layout.astro";
import { auth } from "@yts/api";

const session = await auth.api.getSession({
  headers: Astro.request.headers,
});

if (Astro.url.pathname.startsWith("/app") && !session) {
  return Astro.redirect("/");
}
---

<Layout>
  <App client:only="react" />
</Layout>
